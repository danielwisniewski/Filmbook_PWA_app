<cdk-virtual-scroll-viewport
  [itemSize]="size == 'col-12' ? 275 : 138"
  (scrolledIndexChange)="indexChanged($event)"
  class="movieMiniatureList__viewport"
>
  <div
    class="miniatureList__filmElement animate__animated"
    *cdkVirtualFor="let film of filmData | filter: filter: isIgnore; let even = even"
    [ngClass]="{ 'miniatureList__filmElement__small': size !== 'col-12', 'animate__backInRight': !even, 'animate__backInLeft': even }"
    (contextmenu)="onRightClick($event, film)"
    (click)="navigateTo(film.id, film.title, film.year)"
  
  >
    <div
      class="filmElement__film-poster"
      [ngClass]="{ 'filmElement__film-poster__small': size !== 'col-12' }"
    >
      <img [src]="film.poster ? film.poster : noImageUrl" />
      <span class="filmPoster__rating" *ngIf="film.rating"
        ><mat-icon>star_rate</mat-icon>{{ film.rating | number: "1.1-1" }}</span
      >
    </div>
    <div class="filmElement__film-info" *ngIf="size == 'col-12'">
      <p class="filmInfo__title">{{ film.title }} ({{ film.year }})</p>
      <p *ngIf="film.time">{{ film.time }}</p>
      <p>{{ film.plot }}</p>
    </div>
  </div>
</cdk-virtual-scroll-viewport>
<!-- [routerLink]="'/detailView/' + film.id" -->

<!-- Element do wywołania menu -->
<div
  style="visibility: hidden; position: fixed"
  [style.left]="contextMenuPosition.x"
  [style.top]="contextMenuPosition.y"
  [matMenuTriggerFor]="contextMenu"
></div>
<!-- Element do wywołania menu -->

<mat-menu #contextMenu="matMenu" aria-label="Wybierz akcję">
  <ng-template matMenuContent let-film="film">
    <button mat-menu-item (click)="onSeen(film)">
      <mat-icon>{{ film.seen ? "delete" : "done_outline" }}</mat-icon>
      <span>{{
        film.seen ? "Usuń z obejrzanych" : "Oznacz jako obejrzany"
      }}</span>
    </button>
    <button mat-menu-item (click)="onWatchlist(film)" *ngIf="!film.seen">
      <mat-icon>{{
        film.watchlist ? "visibility_off" : "visibility"
      }}</mat-icon>
      <span>{{
        film.watchlist ? "Usuń z listy do obejrzenia" : "Chcę obejrzeć!"
      }}</span>
    </button>
    <button mat-menu-item (click)="onIgnore(film)">
      <mat-icon>{{ film.ignore ? "thumb_up" : "thumb_down" }}</mat-icon>
      <span>{{ film.ignore ? "Pokaż na liście" : "Nie interesuje mnie" }}</span>
    </button>
  </ng-template>
</mat-menu>
